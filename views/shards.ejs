<!--
=========================================================
* Soft UI Dashboard - v1.0.3
=========================================================

* Product Page: https://www.creative-tim.com/product/soft-ui-dashboard
* Copyright 2021 Creative Tim (https://www.creative-tim.com)
* Licensed under MIT (https://www.creative-tim.com/license)

* Coded by Creative Tim

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
-->
<!DOCTYPE html>
<html lang="en">
<%- include('partials/preloader.ejs', {now:'index', req: req}) %>
<head>
    <style>
        .unselectable {
          -webkit-user-select: none;
          -webkit-touch-callout: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;
        }
      </style>
      <%- themeConfig?.customHtml %>
</head>
<body class="g-sidenav-show bg-gray-100" id="scroll">
<%- include('partials/preload.ejs') %>
<%- include('partials/sidebar.ejs', {config: config, now:'shards'}) %>
<div class="main-content position-relative bg-gray-100 max-height-vh-100 h-100">
    <!-- Navbar -->
    <%- include('partials/navbar.ejs', {now:'shards'}) %>
    <!-- End Navbar -->
    <div class="container-fluid py-4" style="padding-bottom: 0px !important;" id="shardlist">
        <b style="color:#6bd163;" class="unselectable">No shards exist!</b>
    <%- include('partials/footer.ejs') %>
    </div>
</div>
</main>
</div>
<!--  Graph Code !-->
<%- include('partials/scripts.ejs', {now: "shards"}) %>

<script>
    async function updateshards(){
        $.get("/shards/get", function(data, status){
            $('#shardlist').empty()

            $('#shardlist').append($('<div class="row" id="shardlist2"></div>'));

            data = data.sort((a, b) => a.id - b.id);

            for(const shard in data) {
                let row = $(`<div class="col-sm-1">
                <button type="button" class="btn bg-gradient-success" data-bs-toggle="modal" data-bs-target="#exampleModal${data[shard].id}" style="color:#6bd163;">
                    ${data[shard].id}
                </button>
                </div>
                <div class="modal fade" id="exampleModal${data[shard].id}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                   <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Shard: ${data[shard].id}</h5>
                                <button type="button" class="btn-close text-dark" data-bs-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                        <div class="modal-body">
                            <i class="ni ni-circle-08"></i> Users: ${data[shard].users.toLocaleString()}<br>
                            <i class="ni ni-laptop"></i> Servers: ${data[shard].guilds.toLocaleString()}<br>
                            <i class="ni ni-collection"></i> Channels: ${data[shard].channels.toLocaleString()}<br>
                            <i class="ni ni-cloud-download-95"></i> Latency: ${data[shard].ping}ms<br>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn bg-gradient-secondary" data-bs-dismiss="modal">Close</button>
                        </div>
                   </div>
                </div>
            </div>`)

                $('#shardlist2').append(row.clone(true))
                // $("body").tooltip({ selector: '[data-toggle=tooltip]' });
            }
        });
    }
    updateshards()
</script>
</body>

</html>
